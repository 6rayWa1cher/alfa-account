(this["webpackJsonpmy-account"]=this["webpackJsonpmy-account"]||[]).push([[0],{23:function(t,e,n){},24:function(t,e,n){},25:function(t,e,n){},26:function(t,e,n){},28:function(t,e,n){},46:function(t,e,n){},48:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),r=n(10),i=n.n(r),s=(n(23),n(4)),o=(n(24),n(5)),u=function(t){var e=t.getFullYear(),n=t.getMonth()+1,a=t.getDate(),c="";return c+=a<10?"0"+a:a,c+="-",c+=n<10?"0"+n:n,c+="-",c+=e},l=function(t){return Math.round(100*t)/100},j=(n(25),n(26),n(3)),d=function(t){var e=t.edit,n=t.setEdit,c=t.value,r=t.setValue,i=t.notOriginal,o=Object(a.useState)(""+c),u=Object(s.a)(o,2),l=u[0],d=u[1],O=i?"ChangedCell":"";return e?Object(j.jsx)("td",{className:O,children:Object(j.jsx)("input",{type:"text",onChange:function(t){var e=t.target.value.replace(",",".");/^-?\d+(\.\d?\d?)?$/.test(e)&&(d(e),r(parseFloat(e)))},value:l,onKeyUp:function(t){"Enter"===t.key&&n(!1)}})}):Object(j.jsx)("td",{className:O,onClick:function(){d(c),n(!0)},children:c})},O=function(t){return[t,0]},b=function(t){return[0,t]},h=function(t){var e=l(t/2);return[e,t-e]},f=function(t){return[0,0]},x=function(t){var e=t.transaction,n=t.handleTransactionChange,a=function(t){return function(){var a=e.total,c=t(a),r=Object(s.a)(c,2),i=r[0],u=r[1];n(Object(o.a)(Object(o.a)({},e),{},{left:i,right:u}))}};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{type:"button",onClick:a(O),value:"<=="}),Object(j.jsx)("input",{type:"button",onClick:a(h),value:"1/2"}),Object(j.jsx)("input",{type:"button",onClick:a(b),value:"==>"}),Object(j.jsx)("input",{type:"button",onClick:function(){n(Object(o.a)(Object(o.a)({},e),e.original))},value:"reset"})]})},g=function(t){var e=t.transaction,n=t.handleTransactionChange,c=Object(a.useState)(!1),r=Object(s.a)(c,2),i=r[0],l=r[1];console.log(e);var O=e.date,b=e.store,h=e.total,f=e.left,g=e.right;return Object(j.jsxs)("tr",{className:f+g!==h?"RedRow":null,children:[Object(j.jsx)("td",{children:u(O)}),Object(j.jsx)("td",{children:b}),Object(j.jsx)(d,{edit:i,setEdit:l,value:h,setValue:function(t){return n(Object(o.a)(Object(o.a)({},e),{},{total:t}))},notOriginal:h!==e.original.total}),Object(j.jsx)(d,{edit:i,setEdit:l,value:f,setValue:function(t){return n(Object(o.a)(Object(o.a)({},e),{},{left:t}))},notOriginal:f!==e.original.left}),Object(j.jsx)(d,{edit:i,setEdit:l,value:g,setValue:function(t){return n(Object(o.a)(Object(o.a)({},e),{},{right:t}))},notOriginal:g!==e.original.right}),Object(j.jsx)("td",{children:Object(j.jsx)(x,{transaction:e,handleTransactionChange:n})})]})},p=(n(28),function(t){var e=t.transactions,n=t.handleTransactionChange;return Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"\u0414\u0430\u0442\u0430"}),Object(j.jsx)("th",{children:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"}),Object(j.jsx)("th",{children:"\u0421\u0443\u043c\u043c\u0430"}),Object(j.jsx)("th",{children:"\u041b\u0438\u0447\u043d\u044b\u0439"}),Object(j.jsx)("th",{children:"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u044b\u0439"}),Object(j.jsx)("th",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),Object(j.jsx)("tbody",{children:e.map((function(t){return Object(j.jsx)(g,{transaction:t,handleTransactionChange:n},t.id)}))})]})}),v=n(15),E=n(17),m=n.n(E),C=n(14),T=n.n(C),R=n(18),A=function(){var t=Object(R.a)(T.a.mark((function t(e){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){if(e){var a=new FileReader;a.onload=function(e){t(e.target.result)},a.onerror=function(t){n(t)},a.readAsText(e,"cp1251")}else t()})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(t){var e=t.updateTransactions;return Object(j.jsx)("input",{type:"file",id:"file-selector",onChange:function(t){return A(t.target.files[0]).then(e)}})},N=(n(46),function(t,e,n){if(t){console.log(t);var a="\u0422\u0438\u043f \u0441\u0447\u0451\u0442\u0430;\u041d\u043e\u043c\u0435\u0440 \u0441\u0447\u0435\u0442\u0430;\u0412\u0430\u043b\u044e\u0442\u0430;\u0414\u0430\u0442\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438;\u0420\u0435\u0444\u0435\u0440\u0435\u043d\u0441 \u043f\u0440\u043e\u0432\u043e\u0434\u043a\u0438;\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438;\u041f\u0440\u0438\u0445\u043e\u0434;\u0420\u0430\u0441\u0445\u043e\u0434;",c=t.split("\n");if(0!==c.length){if(c[0]===a){var r=[],i=Object(v.a)(/^[0-9]+\++[0-9]+ +([ 0-9A-Z\\a-z]+?) +([0-9][0-9]\.[0-9][0-9]\.[0-9][0-9]) ([0-9][0-9]\.[0-9][0-9]\.[0-9][0-9]).+$/,{store:1,date1:2,date2:3}),u=Object(v.a)(/^[0-9]+ [A-Za-z]+ ([ 0-9A-Z\\a-z]+?) [0-9]+>[ A-Za-z]+? ([0-9][0-9]\.[0-9][0-9]\.[0-9][0-9]) ([0-9][0-9]\.[0-9][0-9]\.[0-9][0-9]).+$/,{store:1,date1:2,date2:3});return c.forEach((function(t){if(a!==t){var c=t.split(";");delete c[c.length-1];var l,j=Object(s.a)(c,8),d=j[2],x=j[4],g=j[5],p=j[6],v=j[7];if(null!==(l="HOLD"===x?u.exec(g):i.exec(g))){var E=l.groups,m=E.store,C=E.date2,T=m.substring(m.lastIndexOf("\\")+1),R=Math.round(100*(parseFloat(p.replace(",","."))-parseFloat(v.replace(",","."))))/100,A=function(t,e){switch(t){case"PEREKRESTOK":case"PYATEROCHKA":case"PYATEROCHKA 1":case"TRANSPORTTVER":case"APTECHNOE UCH":case"APTEKA":case"MODUS":case"KRASNOE BELOE":case"PEREKRESTOK B":case"BISTRO ARZI 1":return b(e);case"IP LINDIN YU":case"HYPE PLACE OL":case"YM ozon":case"STEAMGAMES CO":return O(e);case"HAPPY BURGER":case"CHICKEN HOUSE":case"MCDONALDS 245":case"OOO OBED":case"BREAKFAST BAN":case"O ESKIMO":return h(e);default:return f(e)}}(T,R),S=Object(s.a)(A,2),N=S[0],P=S[1],y=C.split("."),K=Object(s.a)(y,3),w=K[0],D=K[1],M=K[2],F={id:r.length,store:T,date:new Date(+M+2e3,D-1,w),total:R,currency:d,left:N,right:P};e<=F.date&&F.date<=n&&r.push(Object(o.a)(Object(o.a)({},F),{},{original:F}))}}})),r.sort((function(t,e){return-(t.date-e.date)})),r}alert("Header didn't matched!")}else alert("File content is empty!")}}),P=function(t){var e=t.setTransations,n=new Date,c=Object(a.useState)(new Date(n.getFullYear(),n.getMonth()-1,n.getDay())),r=Object(s.a)(c,2),i=r[0],o=r[1],u=Object(a.useState)(n),l=Object(s.a)(u,2),d=l[0],O=l[1];return Object(j.jsxs)("div",{className:"TransactionLoader",children:[Object(j.jsx)("div",{className:"LeftPanel",children:Object(j.jsx)(m.a,{value:[i,d],onChange:function(t){var e=Object(s.a)(t,2),n=e[0],a=e[1];o(n),O(a)}})}),Object(j.jsx)("div",{className:"RightPanel",children:Object(j.jsx)(S,{updateTransactions:function(t){var n=N(t,i,d);e(n)}})})]})},y=function(t){var e=t.transactions,n=e.map((function(t){return t.left})).reduce((function(t,e){return l(t+e)})),a=e.map((function(t){return t.right})).reduce((function(t,e){return l(t+e)}));return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:"\u041b\u0438\u0447\u043d\u044b\u0439"}),Object(j.jsx)("span",{className:"LeftSum",children:n})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u044b\u0439"}),Object(j.jsx)("span",{className:"RightSum",children:a})]})]})},K=[{id:0,store:"PEREKRESTOK",date:new Date,total:-850.23,left:0,right:-850.23,original:{id:0,store:"PEREKRESTOK",date:new Date,total:-850.23,left:0,right:-850.23}}],w=function(){var t=Object(a.useState)(K),e=Object(s.a)(t,2),n=e[0],c=e[1];return Object(j.jsxs)("div",{className:"Container",children:[Object(j.jsxs)("div",{className:"Top",children:[Object(j.jsx)(y,{transactions:n}),Object(j.jsx)(P,{setTransations:c})]}),Object(j.jsx)("div",{className:"Content",children:Object(j.jsx)(p,{transactions:n,handleTransactionChange:function(t){var e=n.map((function(e){return e.id===t.id?t:e}));c(e)}})})]})};i.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(w,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.fb64da70.chunk.js.map